{
  "tech_stack": [
    "TypeScript",
    "React 18",
    "Vite 5",
    "React Router v6",
    "@tanstack/react-query v5",
    "Supabase (Postgres, Auth, Edge Functions)",
    "Tailwind CSS",
    "shadcn/ui components",
    "lucide-react",
    "date-fns",
    "recharts"
  ],
  "features": [
    {
      "name": "App Shell & Routing",
      "description": "Application shell with global providers, error boundary, and route setup including protected nested routes. Uses React.lazy code-splitting and Suspense fallback for faster initial load.",
      "files": [
        "src/main.tsx",
        "src/App.tsx",
        "src/components/ErrorBoundary.tsx",
        "src/components/ProtectedRoute.tsx",
        "src/components/Layout.tsx",
        "src/components/Sidebar.tsx",
        "src/components/TopBar.tsx",
        "src/components/MobileDrawer.tsx"
      ]
    },
    {
      "name": "Authentication",
      "description": "Supabase auth with PKCE, URL session detection, user profile upsert, and OAuth token storage. Provides auth context, sign-in/up/Google OAuth, and sign-out.",
      "files": [
        "src/hooks/useAuth.tsx",
        "src/pages/Auth.tsx",
        "src/components/AuthDebug.tsx",
        "src/integrations/supabase/client.ts"
      ]
    },
    {
      "name": "Initial Gmail Fetch Flow",
      "description": "Handles first-time OAuth session, stores Gmail tokens, invokes edge function to generate digest, and shows an overlay with progress.",
      "files": [
        "src/hooks/useInitialFetch.tsx",
        "src/components/InitialFetchOverlay.tsx",
        "src/components/ConnectEmailDialog.tsx"
      ]
    },
    {
      "name": "Dashboard (Today’s Digest)",
      "description": "Loads today’s digest emails (importance ≥ 0.4), shows quick stats and refresh, prompts Gmail connection if missing.",
      "files": [
        "src/pages/Dashboard.tsx",
        "src/components/EmailCard.tsx",
        "src/components/EmptyState.tsx"
      ]
    },
    {
      "name": "History",
      "description": "Shows recent digests (last 30 days) with formatted dates and email cards.",
      "files": [
        "src/pages/History.tsx",
        "src/components/EmailCard.tsx",
        "src/components/EmptyState.tsx"
      ]
    },
    {
      "name": "Tasks",
      "description": "Task management with optimistic completion toggle, delete, and deadline update. Splits into pending and completed tabs.",
      "files": [
        "src/pages/Tasks.tsx",
        "src/hooks/useTasks.tsx",
        "src/components/TaskRow.tsx",
        "src/components/EmptyState.tsx"
      ]
    },
    {
      "name": "Settings",
      "description": "User preferences (digest time, number of top emails). Saves via edge function and loads from Supabase.",
      "files": [
        "src/pages/Settings.tsx"
      ]
    },
    {
      "name": "Marketing/Home",
      "description": "Public landing page with features, FAQs, and CTAs for sign-in/sign-up.",
      "files": [
        "src/pages/Home.tsx"
      ]
    },
    {
      "name": "Shared UI",
      "description": "Design system and shared UI components built on shadcn/ui and Tailwind.",
      "files": [
        "src/components/ui/*",
        "src/index.css",
        "src/App.css"
      ]
    },
    {
      "name": "Supabase Types & Client",
      "description": "Typed Supabase client and database types.",
      "files": [
        "src/integrations/supabase/client.ts",
        "src/integrations/supabase/types.ts"
      ]
    }
  ]
}
